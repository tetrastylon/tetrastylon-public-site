(this["webpackJsonptetrastylon-public-site-source"]=this["webpackJsonptetrastylon-public-site-source"]||[]).push([[0],{304:function(e,t,n){},305:function(e,t,n){},383:function(e,t,n){},385:function(e,t,n){"use strict";n.r(t);var c,s=n(37),i=n.n(s),a=n(77),r=n(8),o=function(){return Object(r.jsx)("div",{children:"Error!"})},d=function(){return Object(r.jsx)("div",{children:"Loading..."})},l=n(392),j=n(389),h=n(394),u=n(390),b=n(395),x=n(396),O=n(397),m=n(69),p=n.n(m),_=n(200),v=n.n(_),g=n(138),f=n(143),y=function(e){return Object(r.jsxs)("nav",{style:{backgroundImage:'url("/logo_navbar.png")'},children:[Object(r.jsx)("div",{className:"nav-item-wrapper",children:Object(r.jsx)("div",{className:"nav-item",children:Object(r.jsxs)(g.a,{title:"Search",children:[Object(r.jsx)(f.a,{}),Object(r.jsx)("label",{children:"Search"})]})})}),Object(r.jsx)("div",{className:"nav-item-wrapper",children:Object(r.jsx)("div",{className:"nav-item",children:Object(r.jsxs)(g.a,{title:"Home",children:[Object(r.jsx)(b.a,{}),Object(r.jsx)("label",{children:"Home"})]})})})]})},w=(n(304),function(e){var t=window.location.port?":".concat(window.location.port):"",n="".concat(window.location.protocol,"//").concat(window.location.hostname).concat(t,"/house/").concat(e.id);return Object(r.jsxs)("span",{children:[e.user_created.last_name,", ",e.user_created.first_name.substring(0,1),'., "',e.house_name,'", Tetrastylon, ',new Date(e.date_updated).getUTCFullYear(),", ",Object(r.jsx)("a",{href:n,children:n}),"."]})}),N=function(){var e=document.querySelector(".section.cite-as p");v()(e.innerHTML,{asHtml:!0})},C=function(e){var t=e.images.map((function(e){return e.directus_files_id})),n=t.length>0?"url('".concat("https://db.tetrastylon.eu","/assets/").concat(t[0],"?width=1400&height=600')"):null,c=[e.latitude,e.longitude];return Object(r.jsxs)("div",{className:"house loaded",children:[Object(r.jsxs)("header",{children:[Object(r.jsx)(y,{}),Object(r.jsxs)("div",{className:"jumbo",style:{backgroundImage:n},children:[Object(r.jsxs)("div",{className:"jumbo-contents",children:[Object(r.jsx)("h1",{children:e.house_name}),Object(r.jsx)("h2",{children:e.city})]}),Object(r.jsx)("div",{children:Object(r.jsx)("div",{className:"mini-map",children:Object(r.jsxs)(j.a,{center:c,zoom:5,zoomControl:!1,attributionControl:!1,children:[Object(r.jsx)(h.a,{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}"}),Object(r.jsx)(u.a,{position:c})]})})})]})]}),Object(r.jsxs)("main",{children:[Object(r.jsx)("div",{className:"section key-properties",children:Object(r.jsxs)("ul",{children:[Object(r.jsxs)("li",{children:[Object(r.jsx)(b.a,{})," ",e.number_of_rooms," Rooms, ",parseFloat(e.house_dimensions).toFixed()," m\xb2"]}),Object(r.jsxs)("li",{children:[Object(r.jsx)(x.a,{})," ",e.building_phases," Building Phases"]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("label",{children:"Constructed"})," ",e.construction_date]}),Object(r.jsxs)("li",{children:[Object(r.jsx)("label",{children:"Abandonded"})," ",e.abandon_date]})]})}),Object(r.jsxs)("div",{className:"section description",children:[Object(r.jsx)("h3",{children:"Description"}),Object(r.jsx)(p.a,{children:e.house_description})]}),Object(r.jsxs)("div",{className:"section",children:[Object(r.jsx)("h3",{children:"Dating of Phases"}),Object(r.jsx)(p.a,{children:e.dating_of_phases})]}),Object(r.jsxs)("div",{className:"section",children:[Object(r.jsx)("h3",{children:"Situation of Entrance"}),Object(r.jsx)(p.a,{children:e.situation_of_entrance})]}),Object(r.jsxs)("div",{className:"section",children:[Object(r.jsx)("h3",{children:"Representation Room Typology"}),Object(r.jsx)(p.a,{children:e.representation_room_typology})]}),Object(r.jsxs)("div",{className:"section atrium",children:[Object(r.jsx)("h3",{children:"Atrium"}),parseFloat(e.atrium_extension).toFixed()," m\xb2",e.atrium_typology?", ":""," ",Object(r.jsx)(p.a,{children:e.atrium_typology})]}),Object(r.jsxs)("div",{className:"section",children:[Object(r.jsx)("h3",{children:"Impluvium Extension"}),parseFloat(e.impluvium_extension).toFixed()," m\xb2"]}),Object(r.jsxs)("div",{className:"section",children:[Object(r.jsx)("h3",{children:"Other Uncovered Spaces"}),Object(r.jsx)(p.a,{children:e.other_uncovered_spaces})]}),e.comments&&Object(r.jsxs)("div",{className:"section",children:[Object(r.jsx)("h3",{children:"Comments"}),Object(r.jsx)(p.a,{children:e.comments})]}),e.images.length>0&&Object(r.jsxs)("div",{className:"section images",children:[Object(r.jsx)("h3",{children:"Images"}),Object(r.jsx)(l.a.PreviewGroup,{children:e.images.map((function(e){return Object(r.jsx)(l.a,{width:200,src:"".concat("https://db.tetrastylon.eu","/assets/").concat(e.directus_files_id,"?width=200&height=200"),preview:{src:"".concat("https://db.tetrastylon.eu","/assets/").concat(e.directus_files_id,"?width=1200")}},e.id)}))})]}),e.plans_of_the_house.length>0&&Object(r.jsxs)("div",{className:"section plans",children:[Object(r.jsx)("h3",{children:"Plans of the House"}),Object(r.jsx)(l.a.PreviewGroup,{children:e.plans_of_the_house.map((function(e){return Object(r.jsx)(l.a,{width:200,src:"".concat("https://db.tetrastylon.eu","/assets/").concat(e.directus_files_id,"?width=200&height=200"),preview:{src:"".concat("https://db.tetrastylon.eu","/assets/").concat(e.directus_files_id,"?width=1200")}},e.id)}))})]}),e.interesting_links&&e.interesting_links.length>0&&Object(r.jsxs)("div",{className:"section links",children:[Object(r.jsx)("h3",{children:"Interesting Links"}),Object(r.jsx)("ul",{children:e.interesting_links.map((function(e){return Object(r.jsx)("li",{children:Object(r.jsx)("a",{href:e.url,target:"_blank",children:e.description})},e.id)}))})]}),Object(r.jsxs)("div",{className:"section bibliography",children:[Object(r.jsx)("h3",{children:"Bibliography"}),Object(r.jsx)(p.a,{children:e.bibliography})]}),Object(r.jsxs)("div",{className:"section cite-as",children:[Object(r.jsx)("h3",{children:"Cite as"}),Object(r.jsxs)("p",{children:[w(e),Object(r.jsx)(O.a,{className:"copy",onClick:N})]})]})]})]})},k=n(215),I=function(e){return fetch(e).then((function(e){return e.json()}))},S=function(e){var t=e.match.params.houseId,n=Object(k.a)("".concat("https://db.tetrastylon.eu","/items/house/").concat(t,"?fields=*,*.*"),I),c=n.data;return n.error?Object(r.jsx)(o,{}):c?Object(r.jsx)(C,Object(a.a)({},c.data)):Object(r.jsx)(d,{})},F=n(82),P=n(204),q=n(0),A=n(97),E=n(393),H=n(391),M=n(209),T=n(106),z=n(30),B=(n(305),function(e){var t;return(null===(t=e.images)||void 0===t?void 0:t.length)>0?"".concat("https://db.tetrastylon.eu","/assets/").concat(e.images[0].directus_files_id.id,"?width=120&height=120"):null}),D=function(e){var t=e.data,n=Object(z.f)(),c=t&&t.map((function(e){return{key:e.id,image:B(e),house_name:e.house_name,city:e.city,constructed:{text:e.construction_date,numeric:e.construction_date_numeric},abandonded:{text:e.abandon_date,numeric:e.abandon_date_numeric},dimensions:e.house_dimensions,complete_plan:e.complete_plan}}));return Object(r.jsxs)(H.a,{loading:e.loading&&{indicator:Object(r.jsx)(M.a,{indicator:Object(r.jsx)(T.a,{})})},dataSource:c,pagination:!1,onRow:function(e){return{onClick:function(t){return function(e){return n.push("/house/".concat(e.key))}(e)}}},children:[Object(r.jsx)(H.a.Column,{title:"",dataIndex:"image",render:function(e){return Object(r.jsx)(l.a,{src:e,preview:!1})}}),Object(r.jsx)(H.a.Column,{title:"House Name",dataIndex:"house_name"}),Object(r.jsx)(H.a.Column,{title:"City",dataIndex:"city"}),Object(r.jsx)(H.a.Column,{title:"Constructed",dataIndex:["constructed","text"]}),Object(r.jsx)(H.a.Column,{title:"Abandonded",dataIndex:["abandonded","text"]})]})},R=function(e){return Object(r.jsx)("div",{children:"Error"})},G=new A.ApolloClient({uri:"".concat("https://db.tetrastylon.eu","/graphql"),cache:new A.InMemoryCache({typePolicies:{items:{keyFields:[]}}})});function L(e){var t,n=Object(A.useQuery)((t=e.query,Object(A.gql)(c||(c=Object(P.a)(['\n  query {\n    items {\n      house(search: "','", limit: 100) {\n        id,\n        house_name,\n        city,\n        latitude,\n        longitude,\n        construction_date,\n        construction_date_numeric,\n        abandon_date,\n        abandon_date_numeric,\n        complete_plan,\n        house_dimensions,\n        cistern,\n        images {\n          id,\n          directus_files_id {\n            id\n          }\n        }\n      }\n    }\n  }'])),t))),s=n.loading,i=n.error,a=n.data;return s?Object(r.jsx)(D,{loading:!0}):i?Object(r.jsx)(R,{}):Object(r.jsx)(D,{data:a.items.house})}var J=function(e){var t=Object(q.useState)(),n=Object(F.a)(t,2),c=n[0],s=n[1];return Object(r.jsxs)("div",{className:"search",children:[Object(r.jsx)("header",{children:Object(r.jsx)("nav",{})}),Object(r.jsx)("div",{className:"search-bar",children:Object(r.jsx)(E.a.Search,{placeholder:"Search...",allowClear:!0,size:"large",onSearch:function(e){return s(e)}})}),Object(r.jsx)("div",{className:"search-results",children:Object(r.jsx)(A.ApolloProvider,{client:G,children:c&&Object(r.jsx)(L,{query:c})})})]})},U=function(e){return Object(r.jsx)("h1",{children:"Map"})},Q=n(136);n(383);var W=function(){return Object(r.jsx)(Q.a,{children:Object(r.jsxs)(z.c,{children:[Object(r.jsx)(z.a,{path:"/search",component:J}),Object(r.jsx)(z.a,{path:"/house/:houseId",component:S}),Object(r.jsx)(z.a,{path:"/map",children:Object(r.jsx)(U,{})}),Object(r.jsxs)(z.a,{path:"/",children:[Object(r.jsx)("p",{children:"Future site of the Tetrastylon DB interface. Nothing to see yet."}),Object(r.jsx)(Q.b,{to:"/house/65dcf6b5-d0a4-45c9-a466-c072d1351c93",children:"Example house"})]})]})})};n(384);i.a.render(Object(r.jsx)(W,{}),document.getElementById("app"))}},[[385,1,2]]]);
//# sourceMappingURL=main.5b43b56d.chunk.js.map