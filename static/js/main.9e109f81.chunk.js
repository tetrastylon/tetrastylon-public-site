(this["webpackJsonptetrastylon-public-site-source"]=this["webpackJsonptetrastylon-public-site-source"]||[]).push([[0],{311:function(e,t,s){},313:function(e,t,s){},390:function(e,t,s){},391:function(e,t,s){},393:function(e,t,s){"use strict";s.r(t);var n,c=s(38),i=s.n(c),a=s(60),r=s(58),o=s(221),l=s(403),d=s(3),j=function(){return Object(d.jsx)("div",{className:"house error",children:Object(d.jsxs)("div",{className:"message",children:[Object(d.jsx)(l.a,{}),Object(d.jsx)("div",{className:"label",children:"There was an error loading data."})]})})},h=s(87),b=function(){return Object(d.jsx)("div",{className:"house loading",children:Object(d.jsxs)("div",{className:"spinner",children:[Object(d.jsx)(h.a,{}),Object(d.jsx)("div",{className:"label",children:"Loading"})]})})},u=s(44),m=s(0),x=s(402),O=s(145),p=s(395),g=s(406),_=s(396),v=s(407),y=s(408),f=s(409),N=s(73),C=s.n(N),S=s(208),w=s.n(S),I=s(400),k=function(e){var t=Object(m.useState)(),s=Object(u.a)(t,2),n=s[0],c=s[1],i=n?n.directus_files_id:{},a=i.title,r=i.description;return Object(d.jsxs)(d.Fragment,{children:[e.images.map((function(e){return Object(d.jsx)(I.a,{width:200,src:"".concat("https://db.tetrastylon.eu","/assets/").concat(e.directus_files_id.id,"?width=200&height=200"),preview:{src:"".concat("https://db.tetrastylon.eu","/assets/").concat(e.directus_files_id.id,"?width=1200"),onVisibleChange:function(t){return t?c(e):c()}}},e.id)})),(a||r)&&Object(d.jsx)("div",{className:"image-caption-wrapper",children:Object(d.jsxs)("div",{className:"image-caption",children:[a&&Object(d.jsx)("h4",{children:a}),r&&Object(d.jsx)("p",{children:r})]})})]})},M=s(42),A=s(404),T=s(149),E=s(405),q=function(e){return Object(d.jsxs)("nav",{className:"content-nav",style:{backgroundImage:'url("/images/logo_navbar_petrol.png")'},children:[Object(d.jsx)(M.b,{className:"nav-item-wrapper",to:"/bibliography",children:Object(d.jsxs)("div",{className:"nav-item",children:[Object(d.jsx)(A.a,{}),Object(d.jsx)("span",{children:"Bibliography"})]})}),Object(d.jsx)(M.b,{className:"nav-item-wrapper",to:"/search",children:Object(d.jsxs)("div",{className:"nav-item",children:[Object(d.jsx)(T.a,{}),Object(d.jsx)("span",{children:"Search"})]})}),Object(d.jsx)(M.b,{className:"nav-item-wrapper",to:"/",children:Object(d.jsxs)("div",{className:"nav-item",children:[Object(d.jsx)(E.a,{}),Object(d.jsx)("span",{children:"Home"})]})})]})},F=(s(311),"https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}"),G="https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",z=function(e){var t=window.location.port?":".concat(window.location.port):"",s="".concat(window.location.protocol,"//").concat(window.location.hostname).concat(t,"/house/").concat(e.id);return Object(d.jsxs)("span",{children:[e.user_created.last_name,", ",e.user_created.first_name.substring(0,1),'., "',e.house_name,'", Tetrastylon, ',new Date(e.date_updated).getUTCFullYear(),", ",Object(d.jsx)("a",{href:s,children:s}),"."]})},D=function(){var e=document.querySelector(".section.cite-as p");w()(e.innerHTML,{asHtml:!0})},L=function(e){var t=Object(m.useState)(F),s=Object(u.a)(t,2),n=s[0],c=s[1],i=e.images.map((function(e){return e.directus_files_id})),a=i.length>0?"url('".concat("https://db.tetrastylon.eu","/assets/").concat(i[0].id,"?width=1400&height=600')"):null,r=[e.latitude,e.longitude];return Object(d.jsxs)("div",{className:"house loaded",children:[Object(d.jsxs)("header",{children:[Object(d.jsx)(q,{}),Object(d.jsxs)("div",{className:"jumbo",style:{backgroundImage:a},children:[Object(d.jsxs)("div",{className:"jumbo-contents",children:[Object(d.jsx)("h1",{children:e.house_name}),Object(d.jsx)("h2",{children:e.city})]}),Object(d.jsx)("div",{children:Object(d.jsxs)("div",{className:"mini-map",children:[Object(d.jsxs)(p.a,{center:r,zoom:5,zoomControl:!1,attributionControl:!1,children:[n==F&&Object(d.jsx)(g.a,{url:n}),n==G&&Object(d.jsx)(g.a,{url:n}),Object(d.jsx)(_.a,{position:r})]}),Object(d.jsx)("div",{className:"layer-toggle",children:Object(d.jsx)(x.a,{onChange:function(e){return c(e?G:F)},checkedChildren:"SATELLITE",unCheckedChildren:"STREET"})})]})})]})]}),Object(d.jsxs)("main",{children:[Object(d.jsx)("div",{className:"section key-properties",children:Object(d.jsxs)("ul",{children:[Object(d.jsxs)("li",{children:[Object(d.jsx)(v.a,{})," ",e.number_of_rooms," Rooms, ",parseFloat(e.house_dimensions).toFixed()," m\xb2"]}),Object(d.jsx)("li",{children:e.building_phases&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(y.a,{})," ",e.building_phases," Building Phase",e.building_phases>0&&"s"]})}),Object(d.jsxs)("li",{children:[Object(d.jsx)("label",{children:"Constructed"})," ",Object(d.jsx)("span",{className:"nowrap",children:e.construction_date})]}),Object(d.jsxs)("li",{children:[Object(d.jsx)("label",{children:"Abandonded"})," ",Object(d.jsx)("span",{className:"nowrap",children:e.abandon_date})]})]})}),Object(d.jsxs)("div",{className:"section description",children:[Object(d.jsx)("h3",{children:"Description"}),Object(d.jsx)(C.a,{children:e.house_description})]}),Object(d.jsxs)("div",{className:"section",children:[Object(d.jsx)("h3",{children:"Dating of Phases"}),Object(d.jsx)(C.a,{children:e.dating_of_phases})]}),Object(d.jsxs)("div",{className:"section",children:[Object(d.jsx)("h3",{children:"Situation of Entrance"}),Object(d.jsx)(C.a,{children:e.situation_of_entrance})]}),Object(d.jsxs)("div",{className:"section",children:[Object(d.jsx)("h3",{children:"Representation Room Typology"}),Object(d.jsx)(C.a,{children:e.representation_room_typology})]}),Object(d.jsxs)("div",{className:"section atrium",children:[Object(d.jsx)("h3",{children:"Atrium"}),Object(d.jsx)(C.a,{children:e.atrium_typology}),e.atrium_typology&&e.atrium_extension?", ":"",e.atrium_extension&&"".concat(parseFloat(e.atrium_extension).toFixed()," m\xb2"),!(e.atrium_extension||e.atrium_typology)&&"-"]}),Object(d.jsxs)("div",{className:"section",children:[Object(d.jsx)("h3",{children:"Impluvium Extension"}),e.impluvium_extension?"".concat(parseFloat(e.impluvium_extension).toFixed()," m\xb2"):"-"]}),Object(d.jsxs)("div",{className:"section",children:[Object(d.jsx)("h3",{children:"Other Uncovered Spaces"}),Object(d.jsx)(C.a,{children:e.other_uncovered_spaces})]}),e.comments&&Object(d.jsxs)("div",{className:"section",children:[Object(d.jsx)("h3",{children:"Comments"}),Object(d.jsx)(C.a,{children:e.comments})]}),e.images.length>0&&Object(d.jsxs)("div",{className:"section images",children:[Object(d.jsx)("h3",{children:"Images"}),Object(d.jsx)(k,{images:e.images})]}),e.plans_of_the_house.length>0&&Object(d.jsxs)("div",{className:"section plans",children:[Object(d.jsx)("h3",{children:"Plans of the House"}),Object(d.jsx)(k,{images:e.plans_of_the_house})]}),e.interesting_links&&e.interesting_links.length>0&&Object(d.jsxs)("div",{className:"section links",children:[Object(d.jsx)("h3",{children:"Interesting Links"}),Object(d.jsx)("ul",{children:e.interesting_links.map((function(e){return Object(d.jsx)("li",{children:Object(d.jsx)("a",{href:e.url,target:"_blank",children:e.description})},e.id)}))})]}),Object(d.jsxs)("div",{className:"section bibliography",children:[Object(d.jsx)("h3",{children:"Bibliography"}),Object(d.jsx)(C.a,{children:e.bibliography})]}),Object(d.jsxs)("div",{className:"section cite-as",children:[Object(d.jsx)("h3",{children:"Cite as"}),Object(d.jsxs)("p",{children:[z(e),Object(d.jsx)(O.a,{title:"Copy to Clipboard",children:Object(d.jsx)(f.a,{className:"copy",onClick:D})})]})]})]})]})},P=function(e){return fetch(e).then((function(e){return e.json()}))},R=function(e){var t=e.match.params.houseId,s=Object(o.a)("".concat("https://db.tetrastylon.eu","/items/house/").concat(t,"?fields=*,*.*,*.*.id,*.*.title,*.*.description"),P),n=s.data;return s.error?Object(d.jsx)(j,{}):n?Object(d.jsx)(L,Object(r.a)({},n.data)):Object(d.jsx)(b,{})},H=s(139),B=s(401),U=s(399),W=s(215),J=(s(313),function(e){var t;return(null===(t=e.images)||void 0===t?void 0:t.length)>0?"".concat("https://db.tetrastylon.eu","/assets/").concat(e.images[0].directus_files_id.id,"?width=120&height=120"):null}),Q=function(e){var t=e.data,s=t&&t.map((function(e){return{key:e.id,image:J(e),house_name:e.house_name,city:e.city,constructed:{text:e.construction_date,numeric:e.construction_date_numeric},abandonded:{text:e.abandon_date,numeric:e.abandon_date_numeric},dimensions:e.house_dimensions,complete_plan:e.complete_plan}}));return Object(d.jsxs)(U.a,{loading:e.loading&&{indicator:Object(d.jsx)(W.a,{indicator:Object(d.jsx)(h.a,{})})},dataSource:s,pagination:!1,onChange:function(t,s,n){return e.onChangeSorting({field:n.columnKey,order:n.order})},children:[Object(d.jsx)(U.a.Column,{title:"",dataIndex:"image",render:function(e){return Object(d.jsx)(I.a,{src:e,preview:!1})}}),Object(d.jsx)(U.a.Column,{title:"House Name",sorter:!0,dataIndex:"house_name",render:function(e,t){return Object(d.jsx)(M.b,{to:"/house/".concat(t.key),children:e})}},"house_name"),Object(d.jsx)(U.a.Column,{title:"City",sorter:!0,dataIndex:"city"},"city"),Object(d.jsx)(U.a.Column,{title:"Constructed",sorter:!0,dataIndex:["constructed","text"]},"construction_date_numeric"),Object(d.jsx)(U.a.Column,{title:"Abandonded",sorter:!0,dataIndex:["abandonded","text"]},"abandon_date_numeric")]})},K=function(e){return Object(d.jsx)("div",{children:"Error"})};function V(e){var t=Object(a.useQuery)(function(e,t){var s=[];return e&&s.push('search: "'.concat(e,'"')),"ascend"===(null===t||void 0===t?void 0:t.order)&&s.push('sort: "'.concat(t.field,'"')),"descend"===(null===t||void 0===t?void 0:t.order)&&s.push('sort: "-'.concat(t.field,'"')),s.push("limit: 1000"),Object(a.gql)(n||(n=Object(H.a)(["\n    query {\n      items {\n        house(",") {\n          id,\n          house_name,\n          city,\n          latitude,\n          longitude,\n          construction_date,\n          construction_date_numeric,\n          abandon_date,\n          abandon_date_numeric,\n          complete_plan,\n          house_dimensions,\n          cistern,\n          images {\n            id,\n            directus_files_id {\n              id\n            }\n          }\n        }\n      }\n    }"])),s.join(", "))}(e.query,e.sorting)),s=t.loading,c=t.error,i=t.data;return s?Object(d.jsx)(Q,{loading:!0}):c?Object(d.jsx)(K,{}):Object(d.jsx)(Q,{data:i.items.house,onChangeSorting:e.onChangeSorting})}var Y,X=function(e){var t=Object(m.useState)(),s=Object(u.a)(t,2),n=s[0],c=s[1],i=Object(m.useState)(),a=Object(u.a)(i,2),r=a[0],o=a[1];return Object(d.jsxs)("div",{className:"search",children:[Object(d.jsx)("header",{children:Object(d.jsx)(q,{})}),Object(d.jsxs)("main",{children:[Object(d.jsx)("div",{className:"search-bar",children:Object(d.jsx)(B.a.Search,{placeholder:"Search...",allowClear:!0,size:"large",onSearch:function(e){return c(e)}})}),Object(d.jsx)("div",{className:"search-results",children:Object(d.jsx)(V,{query:n,sorting:r,onChangeSorting:function(e){return o(e)}})})]})]})},Z=s(153),$=s(110),ee=s(397),te=s(398),se=s(410),ne=function(e){var t=Object(ee.a)();return Object(d.jsxs)(te.a,Object(r.a)(Object(r.a)({},e),{},{children:[e.children,Object(d.jsx)(se.a,{className:"leaflet-tetrastylon-close-button",onClick:function(){return t.closePopup()}})]}))},ce="https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",ie="https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",ae=Object(a.gql)(Y||(Y=Object(H.a)(["\n  query {\n    items {\n      house {\n        id,\n        house_name,\n        city,\n        latitude,\n        longitude,\n        images(limit: 1) {\n          id,\n          directus_files_id {\n            id\n          }\n        }\n      }\n    }\n  }"]))),re=function(e){var t=e.map((function(e){return e.latitude})),s=e.map((function(e){return e.longitude}));return[[Math.min.apply(Math,Object($.a)(t)),Math.min.apply(Math,Object($.a)(s))],[Math.max.apply(Math,Object($.a)(t)),Math.max.apply(Math,Object($.a)(s))]]},oe=function(e){var t=Object(m.useState)(ce),s=Object(u.a)(t,2),n=s[0],c=s[1],i=Object(a.useQuery)(ae),r=(i.loading,i.error,i.data),o=r?r.items.house.map((function(e){return Object(d.jsx)(_.a,{position:[e.latitude,e.longitude],children:Object(d.jsxs)(ne,{children:[e.images.length>0&&Object(d.jsx)("div",{className:"popup-thumbnail",children:Object(d.jsx)("img",{src:"".concat("https://db.tetrastylon.eu","/assets/").concat(e.images[0].directus_files_id.id,"?width=240&height=240")})}),Object(d.jsxs)("div",{className:"popup-body",children:[Object(d.jsx)("h1",{children:e.house_name}),Object(d.jsx)("h2",{children:e.city}),Object(d.jsx)("a",{href:"/house/".concat(e.id),children:"Details"})]})]})},e.id)})):[];return Object(d.jsxs)(d.Fragment,{children:[r&&Object(d.jsxs)(p.a,{zoomControl:!1,attributionControl:!1,bounds:r?re(r.items.house):null,boundsOptions:{padding:[200,200]},children:[n==ce&&Object(d.jsx)(g.a,{url:n}),n==ie&&Object(d.jsx)(g.a,{url:n}),o]}),Object(d.jsx)("div",{className:"layer-toggle",children:Object(d.jsx)(x.a,{onChange:function(e){return c(e?ie:ce)},checkedChildren:"SATELLITE",unCheckedChildren:"STREET"})})]})},le=(s(390),function(e){return Object(d.jsxs)("div",{className:"splash-page",children:[Object(d.jsx)("nav",{className:"splash-nav",children:Object(d.jsxs)("ul",{children:[Object(d.jsx)("li",{children:Object(d.jsx)(Z.a,{to:"#map",children:"Map"})}),Object(d.jsx)("li",{children:Object(d.jsx)(Z.a,{to:"#team",children:"Team"})}),Object(d.jsx)("li",{children:Object(d.jsx)(Z.a,{to:"#about",children:"About"})}),Object(d.jsx)("li",{children:Object(d.jsx)(M.b,{to:"/search",children:"Database"})}),Object(d.jsx)("li",{children:Object(d.jsx)("a",{href:"#",children:"Bibliography"})})]})}),Object(d.jsx)("section",{className:"splash-header",children:Object(d.jsx)("h1",{children:Object(d.jsx)("img",{src:"/images/logo_splash_petrol.png",alt:"Tetrastylon Project"})})}),Object(d.jsx)("section",{className:"deco-image",style:{backgroundImage:"url('/images/atri_des_d_oest.jpg')"},children:Object(d.jsxs)("div",{className:"title",children:[Object(d.jsx)("h3",{children:"The Tetrastyle Courtyard House"}),Object(d.jsx)("h4",{children:"A Roman Domus with a Hybrid Cultural Conception"})]})}),Object(d.jsxs)("section",{className:"intro",children:[Object(d.jsx)("h4",{children:"Short description goes here..."}),Object(d.jsx)("p",{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."}),Object(d.jsx)("p",{className:"to-database",children:Object(d.jsxs)(M.b,{to:"/search",children:[Object(d.jsx)(v.a,{}),Object(d.jsx)("span",{children:"Browse Database"})]})})]}),Object(d.jsx)("section",{className:"the-map",id:"map",children:Object(d.jsx)(oe,{})}),Object(d.jsx)("section",{className:"team",id:"team",children:Object(d.jsx)("h4",{children:"Project Team..."})}),Object(d.jsxs)("section",{className:"acknowledgements",id:"acknowledgements",children:[Object(d.jsx)("h5",{children:"Funding from"}),Object(d.jsx)("img",{src:"/logo_la_sapienza.png",style:{width:220}}),Object(d.jsx)("img",{src:"/logo-ce-horizontal-en-quadri-lr.png",style:{width:250}})]}),Object(d.jsxs)("footer",{id:"about",children:[Object(d.jsx)("p",{children:"About, Imprint, etc. goes here."}),Object(d.jsxs)("span",{className:"attribution",children:["Map data from",Object(d.jsx)("a",{href:"https://developers.arcgis.com/",target:"_blank",rel:"noreferrer",children:"ESRI ArcGIS online"}),". Source: Esri, Maxar, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community."]})]})]})}),de=s(31);s(391);var je=function(){return Object(d.jsx)(M.a,{children:Object(d.jsxs)(de.c,{children:[Object(d.jsx)(de.a,{path:"/search",component:X}),Object(d.jsx)(de.a,{path:"/house/:houseId",component:R}),Object(d.jsx)(de.a,{path:"/",component:le})]})})},he=(s(392),new a.ApolloClient({uri:"".concat("https://db.tetrastylon.eu","/graphql"),cache:new a.InMemoryCache({typePolicies:{items:{keyFields:[]}}})}));i.a.render(Object(d.jsx)(a.ApolloProvider,{client:he,children:Object(d.jsx)(je,{})}),document.getElementById("app"))}},[[393,1,2]]]);
//# sourceMappingURL=main.9e109f81.chunk.js.map